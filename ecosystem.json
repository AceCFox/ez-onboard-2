{
    "apps": [
        {
            "name": "server",
            "script": "node server/server.js",
            "watch": true,
            "max_restarts": 20,
            "instances": 1,
            "max_memory_restart": "200M",
            "env": {
                "PORT": "5000",
                "EC2_ROLE_NAME": "ez-onboard-ec2-service-role",
                "DATABASE_URL": "postgresql://postgres:cafeorange@aurora-serverless-trial2.cluster-cdq0gf9yqizb.us-east-2.rds.amazonaws.com:5432/ez_onboard"
            }
        },
        {
            "name": "client",
            "script": "npm run client",
            "watch": true,
            "max_restarts": 20,
            "instances": 1,
            "max_memory_restart": "200M",
            "env": {
                "PORT": "3000",
                "EC2_ROLE_NAME": "ez-onboard-ec2-service-role"
            }
        }
    ],
    "deploy": {
        "development": {
            "user": "ubuntu",
            "host": "ec2-18-217-150-107.us-east-2.compute.amazonaws.com",
            "key": "./ez-onboard-kwy.pem",
            "ref": "origin/aws-deploy",
            "repo": "https://github.com/GayofReckoning/EZ_Onboard.git",
            "path": "/home/ubuntu/ez-onboarding",
            "pre-setup": "./pre-setup.script",
            "post-deploy": "pm2 startOrRestart ecosystem.json --only server;"
        },
        "development-release": {
            "user": "ubuntu",
            "host": "ec2-18-217-150-107.us-east-2.compute.amazonaws.com",
            "key": "./ez-onboard-kwy.pem",
            "ref": "origin/aws-deploy",
            "repo": "https://github.com/GayofReckoning/EZ_Onboard.git",
            "path": "/home/ubuntu/ez-onboarding",
            "pre-setup": "./pre-setup.script",
            "post-setup": "hash -d npm;sudo npm install",
            "post-deploy": "pm2 startOrRestart ecosystem.json;"
        }
    }
}